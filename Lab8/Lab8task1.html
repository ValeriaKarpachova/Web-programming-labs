<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<title>Анкета</title>
<style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f3f6ff;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
    .container{background:#fff;padding:24px;border-radius:12px;box-shadow:0 6px 20px rgba(10,20,40,0.08);width:380px}
    h2{margin:0 0 12px 0;color:#0b5bd7}
    label{font-size:13px;color:#333}
    input[type="text"],input[type="number"],select{
        width:100%;padding:8px;margin:8px 0 14px 0;border:1px solid #cbd7f0;border-radius:6px;font-size:14px;
    }
    .btn{width:100%;padding:10px;border-radius:8px;border:0;background:#0b5bd7;color:#fff;font-weight:600;cursor:pointer}
</style>

<script>
    let sessionStartMs = Date.now(); // старт сеанса сразу

    function pad2(n){ return n.toString().padStart(2,'0'); }

    function processForm() {
        const form = document.forms['formData'];

        const name = form.userName.value.trim() || "Анонім";
        const surname = form.userSurname.value.trim() || "";
        const age = form.userAge.value.trim() || "";
        const gender = form.userGender.value;
        const country = form.userCountry.value.trim() || "";

        const nowMs = Date.now();
        const diff = nowMs - sessionStartMs;
        const secondsWithMs = (diff / 1000).toFixed(3);

        const w = window.open('', '_blank');
        const doc = w ? w.document : document;

        writeResultDocument(doc, name, surname, age, gender, country, secondsWithMs, sessionStartMs, nowMs);
    }

    function writeResultDocument(doc, name, surname, age, gender, country, secWithMs, startMs, nowMs) {
        doc.open();
        doc.write(`
        <html><head><meta charset="utf-8"><title>Результат — тривалість сеансу</title>
        <style>
            body{font-family:Arial,Helvetica,sans-serif;background:#eef5ff;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
            .box{background:#fff;padding:28px;border-radius:12px;box-shadow:0 10px 30px rgba(10,20,40,0.08);width:520px;text-align:center}
            h1{margin:0 0 12px 0;color:#0847b3}
            p{margin:6px 0;color:#333}
            .large{font-size:26px;font-weight:700;color:#0b5bd7;margin-top:8px}
            .small{font-size:13px;color:#555;margin-top:6px}
        </style></head><body>
        <div class="box">
            <h1>Привіт, <b>${escapeHtml(name)} ${escapeHtml(surname)}</b>!</h1>
            <p>Сеанс тривав:</p>
            <div class="large">${secWithMs} секунд</div>

            <hr style="margin:18px 0">
            <p class="small">Вік: ${escapeHtml(age)}</p>
            <p class="small">Стать: ${escapeHtml(gender)}</p>
            <p class="small">Країна: ${escapeHtml(country)}</p>
        </div>
        </body></html>`);
        doc.close();
    }

    function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }
</script>
</head>

<body>
<div class="container">
    <h2>Анкета</h2>
    <form name="formData" onsubmit="return false;">
        <label>Ваше ім'я:</label>
        <input type="text" name="userName" placeholder="Ім'я">

        <label>Ваше прізвище:</label>
        <input type="text" name="userSurname" placeholder="Прізвище">

        <label>Ваш вік:</label>
        <input type="number" name="userAge" min="1" max="120" placeholder="Вік">

        <label>Стать:</label>
        <select name="userGender">
            <option value="Жіноча">Жіноча</option>
            <option value="Чоловіча">Чоловіча</option>
            <option value="Інше">Інше</option>
        </select>

        <label>Країна:</label>
            <select name="userCountry" required>
                <option value="Україна">Україна</option>
                <option value="Польща">Польща</option>
                <option value="Німеччина">Німеччина</option>
                <option value="США">США</option>
                <option value="Інша">Інша</option>
            </select>

        <input class="btn" type="button" value="Зберегти дані" onclick="processForm()">
    </form>
</div>
</body>
</html>
